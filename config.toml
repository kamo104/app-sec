# Application Configuration
# Environment variables can override any setting using APPSEC__ prefix
# Example: APPSEC__SERVER__PORT=8080 overrides [server] port

[database]
# Path to the SQLite database file
path = "data.db"
# Enable database encryption (SQLCipher) - recommended for production
encrypt = true
# Encryption key (64 hex chars = 32 bytes). Can be set via APPSEC__DATABASE__KEY env var
# If not set, falls back to system keyring (auto-generates key on first run)
# key = ""
keyring_service_name = "APPSEC_DB_KEY"
keyring_username = "APPSEC"
db_key_length = 32

[server]
bind_addr = "127.0.0.1"
port = 4000
# Enable OpenAPI documentation at /api/docs
openapi = true
max_body_size = 10485760
uploads_folder = "uploads"

[session]
duration_days = 7
token_bytes = 32

[token]
email_verification_duration_hours = 2
password_reset_duration_hours = 1
confirmation_bytes = 32

[cleanup]
interval_seconds = 3600

[mail]
smtp_host = "127.0.0.1"
smtp_port = 1025
from_email = "noreply@appsec.local"

[urls]
# Base URL for generating links (e.g., email verification, password reset)
# Also used as default CORS allowed origin
base_url = "http://localhost:4000"

[tls]
# Enable TLS (HTTPS) - recommended for production
enabled = true
cert_path = "certs/cert.pem"
key_path = "certs/key.pem"

[security]
# Enable HSTS (HTTP Strict Transport Security) - requires TLS
hsts_enabled = true
hsts_max_age_seconds = 31536000
hsts_include_subdomains = true
hsts_preload = true
# Allowed origins for CORS (comma-separated)
# If empty, defaults to base_url
# Example: "https://example.com,https://www.example.com"
cors_allowed_origins = ""

[admin]
# Default admin credentials - created on first startup if no users exist
# IMPORTANT: Change these values in production!
# Can be overridden via environment variables:
#   APPSEC__ADMIN__USERNAME, APPSEC__ADMIN__EMAIL, APPSEC__ADMIN__PASSWORD
username = "admin"
email = "admin@localhost"
password = "AdminPassword123!"
