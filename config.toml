# Production configuration for Docker deployment
# This file is copied as config.toml in the Docker image

[database]
prod_path = "/app/data/data.db"
dev_path = "/app/data/data_dev.db"
keyring_service_name = "APPSEC_DB_KEY"
keyring_username = "APPSEC"
db_key_env_var_name = "APPSEC_DB_KEY"
db_key_length = 32

[server]
# Bind to all interfaces in Docker
bind_addr = "0.0.0.0"
port = 4000
# IMPORTANT: Set to false for production
dev_mode = false
max_body_size = 10485760
uploads_folder = "/app/uploads"

[session]
duration_days = 7
token_bytes = 32

[token]
email_verification_duration_hours = 2
password_reset_duration_hours = 1
confirmation_bytes = 32

[cleanup]
interval_seconds = 3600

[mail]
# Use Docker service name for SMTP
smtp_host = "mailhog"
smtp_port = 1025
from_email = "noreply@appsec.local"

[urls]
base_url_dev = "http://localhost:4000"
# Update this to your actual domain in production
base_url_prod = "https://localhost:4000"

[tls]
# Enable TLS for production
enabled = true
# Paths inside the Docker container
cert_path = "/app/certs/cert.pem"
key_path = "/app/certs/key.pem"

[security]
# Enable HSTS for production (requires TLS)
hsts_enabled = true
# 1 year max-age
hsts_max_age_seconds = 31536000
hsts_include_subdomains = true
# Only enable preload if submitting to HSTS preload list
hsts_preload = false
# Allowed origins for CORS (empty = same-origin only)
# For testing, allow the localhost origin
cors_allowed_origins = "https://localhost:4000"

[admin]
# Default admin credentials - created on first startup if no users exist
# IMPORTANT: Change these values in production!
# These can be overridden via environment variables:
#   APPSEC__ADMIN__USERNAME, APPSEC__ADMIN__EMAIL, APPSEC__ADMIN__PASSWORD
username = "admin"
email = "admin@appsec.local"
password = "AdminPassword123!"
