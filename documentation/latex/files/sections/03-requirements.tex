% Component Requirements - Functional and non-functional requirements
\section{Component Requirements}

\subsection{Functional Requirements}

\subsubsection{FR-1: User Registration}

\textbf{ID}: FR-1

\textbf{Description}: The system must allow a new user to register with username, email, and password.

\textbf{Details}:
\begin{itemize}[leftmargin=*,nosep]
  \item Registration is exposed as an HTTP endpoint on the backend.
  \item The frontend provides a dedicated registration form.
  \item A success response does not reveal whether the email or username already exists.
\end{itemize}

\subsubsection{FR-2: Email Verification}

\textbf{ID}: FR-2

\textbf{Description}: The system must require email verification before enabling a full login.

\textbf{Details}:
\begin{itemize}[leftmargin=*,nosep]
  \item On successful registration, a verification token is generated and stored in hashed form.
  \item A verification link containing the token is presented (or logged in dev mode).
  \item Clicking the link (or calling the verification endpoint) marks the user as verified if the token is valid and unexpired.
\end{itemize}

\subsubsection{FR-3: Input Validation}

\textbf{ID}: FR-3

\textbf{Description}: All registration inputs must be strictly validated on backend and frontend.

\textbf{Details}:
\begin{itemize}[leftmargin=*,nosep]
  \item Username: reasonable length, allowed characters, normalized format.
  \item Email: checked against a robust email format and normalized (e.g., lowercase).
  \item Password: minimum length and complexity requirements enforced.
\end{itemize}

\subsubsection{FR-4: Error Handling}

\textbf{ID}: FR-4

\textbf{Description}: The system must provide generic and safe error messages.

\textbf{Details}:
\begin{itemize}[leftmargin=*,nosep]
  \item No distinction between ``email already registered'' and ``user not found'' in responses.
  \item Server errors are logged on the backend but not exposed to users.
  \item Client receives short, user-friendly messages.
\end{itemize}

\subsubsection{FR-5: Token Lifecycle}

\textbf{ID}: FR-5

\textbf{Description}: Verification tokens must be single-use and time-limited.

\textbf{Details}:
\begin{itemize}[leftmargin=*,nosep]
  \item Each token can be used only once.
  \item Tokens have an explicit expiration time.
  \item Expired or consumed tokens are rejected with a generic error.
\end{itemize}

\subsubsection{FR-6: Health Check}

\textbf{ID}: FR-6

\textbf{Description}: The module must expose a simple health endpoint for monitoring.

\textbf{Details}:
\begin{itemize}[leftmargin=*,nosep]
  \item Allows external systems to check that the backend is running.
  \item Does not expose internal or user data.
\end{itemize}

\subsection{Non-Functional Requirements}

\subsubsection{NFR-1: Security}

\textbf{ID}: NFR-1

\textbf{Description}: All security best practices must be followed.

\textbf{Details}:
\begin{itemize}[leftmargin=*,nosep]
  \item No plaintext passwords or tokens stored.
  \item Verification tokens stored only as hashes.
  \item Generic error messages (prevent user enumeration).
  \item HTTPS enforced in production.
  \item No PII in URLs beyond what is unavoidable (e.g., query token is opaque).
  \item Planned rate limiting to soften brute force and abuse.
  \item Input validated both on frontend and backend.
\end{itemize}

\subsubsection{NFR-2: Performance}

\textbf{ID}: NFR-2

\textbf{Description}: The module must handle typical concurrent registration loads.

\textbf{Details}:
\begin{itemize}[leftmargin=*,nosep]
  \item Database operations complete in under 100~ms under normal load.
  \item Token generation in under 50~ms.
  \item API responses in under 200~ms for typical requests.
  \item Argon2 parameters chosen to balance security and latency.
\end{itemize}

\subsubsection{NFR-3: Reliability}

\textbf{ID}: NFR-3

\textbf{Description}: The module must be fault-tolerant.

\textbf{Details}:
\begin{itemize}[leftmargin=*,nosep]
  \item Database transactions roll back on any failure.
  \item Partial registrations are cleaned up if processing fails mid-flow.
  \item Errors are logged and can be correlated across services.
  \item Verification tokens cannot be reused after consumption.
\end{itemize}

\subsubsection{NFR-4: Usability}

\textbf{ID}: NFR-4

\textbf{Description}: The module must provide clear user feedback.

\textbf{Details}:
\begin{itemize}[leftmargin=*,nosep]
  \item Frontend shows field-level validation errors.
  \item Password strength indicators and hints are provided where appropriate.
  \item After registration, user receives clear instructions to check email.
  \item After verification, user is guided to login.
\end{itemize}
