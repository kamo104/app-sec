{"openapi":"3.1.0","info":{"title":"AppSec Demo API","description":"Web app demonstration focused on using good web security practices","version":"1.0.0"},"paths":{"/api/admin/posts/deleted":{"get":{"tags":["admin"],"operationId":"list_deleted_posts","parameters":[{"name":"limit","in":"query","description":"Number of posts to return (default 20)","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","description":"Offset for pagination (default 0)","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"List of deleted posts","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeletedPostsListResponse"}}}},"401":{"description":"Not authenticated"},"403":{"description":"Not authorized"},"500":{"description":"Internal server error"}}}},"/api/admin/posts/{post_id}/restore":{"post":{"tags":["admin"],"operationId":"restore_post","parameters":[{"name":"post_id","in":"path","description":"Post ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Post restored"},"401":{"description":"Not authenticated"},"403":{"description":"Not authorized"},"404":{"description":"Post not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostErrorResponse"}}}},"500":{"description":"Internal server error"}}}},"/api/admin/users":{"get":{"tags":["admin"],"operationId":"list_users","responses":{"200":{"description":"List of users","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserListResponse"}}}},"401":{"description":"Not authenticated"},"403":{"description":"Not authorized"},"500":{"description":"Internal server error"}}}},"/api/admin/users/{user_id}":{"delete":{"tags":["admin"],"operationId":"delete_user","parameters":[{"name":"user_id","in":"path","description":"User ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"User deleted"},"401":{"description":"Not authenticated"},"403":{"description":"Not authorized"},"404":{"description":"User not found"},"500":{"description":"Internal server error"}}}},"/api/admin/users/{user_id}/role":{"put":{"tags":["admin"],"operationId":"update_user_role","parameters":[{"name":"user_id","in":"path","description":"User ID","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserRoleRequest"}}},"required":true},"responses":{"200":{"description":"Role updated"},"401":{"description":"Not authenticated"},"403":{"description":"Not authorized"},"404":{"description":"User not found"},"500":{"description":"Internal server error"}}}},"/api/auth/check":{"get":{"tags":["auth"],"operationId":"auth_check","responses":{"200":{"description":"Session is valid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthSessionResponse"}}}},"401":{"description":"Not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthErrorResponse"}}}}}}},"/api/auth/refresh":{"post":{"tags":["auth"],"operationId":"refresh_session","responses":{"200":{"description":"Session refreshed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthSessionResponse"}}}},"401":{"description":"Not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthErrorResponse"}}}}}}},"/api/comments/{comment_id}":{"delete":{"tags":["comments"],"operationId":"delete_comment","parameters":[{"name":"comment_id","in":"path","description":"Comment ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Comment deleted"},"401":{"description":"Not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthErrorResponse"}}}},"403":{"description":"Not authorized"},"404":{"description":"Comment not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentErrorResponse"}}}},"500":{"description":"Internal server error"}}}},"/api/complete-password-reset":{"post":{"tags":["auth"],"operationId":"complete_password_reset","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetCompleteRequest"}}},"required":true},"responses":{"200":{"description":"Password reset completed"},"400":{"description":"Invalid token or validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompletePasswordResetErrorResponse"}}}},"500":{"description":"Internal server error"}}}},"/api/counter/get":{"get":{"tags":["counter"],"operationId":"get_counter","responses":{"200":{"description":"Counter value retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CounterData"}}}},"401":{"description":"Not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthErrorResponse"}}}},"500":{"description":"Internal server error"}}}},"/api/counter/set":{"post":{"tags":["counter"],"operationId":"set_counter","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetCounterRequest"}}},"required":true},"responses":{"200":{"description":"Counter value updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CounterData"}}}},"401":{"description":"Not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthErrorResponse"}}}},"500":{"description":"Internal server error"}}}},"/api/health":{"get":{"tags":["health"],"operationId":"health_check","responses":{"200":{"description":"Health check successful"}}}},"/api/login":{"post":{"tags":["auth"],"operationId":"login_user","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginErrorResponse"}}}},"401":{"description":"Invalid credentials or email not verified","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginErrorResponse"}}}}}}},"/api/logout":{"post":{"tags":["auth"],"operationId":"logout_user","responses":{"200":{"description":"Logged out successfully"}}}},"/api/posts":{"get":{"tags":["posts"],"operationId":"list_posts","parameters":[{"name":"limit","in":"query","description":"Number of posts to return (default 20)","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","description":"Offset for pagination (default 0)","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"List of posts","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostListResponse"}}}},"500":{"description":"Internal server error"}}},"post":{"tags":["posts"],"operationId":"create_post","requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","description":"Create post request payload (multipart/form-data).\nThis type represents the structure of multipart form data for creating posts.\nUsed for OpenAPI documentation.\n\nNote: This type is not used for serde serialization since multipart data\nis handled by Axum's Multipart extractor. The frontend gets the correct\nTypeScript types from the generated OpenAPI client.","required":["title","image"],"properties":{"description":{"type":["string","null"]},"image":{"type":"string","format":"binary","description":"The image file as binary data"},"title":{"type":"string"}}}}},"required":true},"responses":{"201":{"description":"Post created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePostResponse"}}}},"400":{"description":"Validation error or invalid image","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostErrorResponse"}}}},"401":{"description":"Not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthErrorResponse"}}}},"500":{"description":"Internal server error"}}}},"/api/posts/search":{"get":{"tags":["posts"],"operationId":"search_posts","parameters":[{"name":"q","in":"query","description":"Search query","required":true,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"Number of posts to return (default 20)","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","description":"Offset for pagination (default 0)","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Search results","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostListResponse"}}}},"500":{"description":"Internal server error"}}}},"/api/posts/{post_id}":{"get":{"tags":["posts"],"operationId":"get_post","parameters":[{"name":"post_id","in":"path","description":"Post ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Post details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostResponse"}}}},"404":{"description":"Post not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostErrorResponse"}}}},"500":{"description":"Internal server error"}}},"put":{"tags":["posts"],"operationId":"update_post","parameters":[{"name":"post_id","in":"path","description":"Post ID","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePostRequest"}}},"required":true},"responses":{"200":{"description":"Post updated"},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostErrorResponse"}}}},"401":{"description":"Not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthErrorResponse"}}}},"403":{"description":"Not authorized"},"404":{"description":"Post not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostErrorResponse"}}}},"500":{"description":"Internal server error"}}},"delete":{"tags":["posts"],"operationId":"delete_post","parameters":[{"name":"post_id","in":"path","description":"Post ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Post deleted"},"401":{"description":"Not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthErrorResponse"}}}},"403":{"description":"Not authorized"},"404":{"description":"Post not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostErrorResponse"}}}},"500":{"description":"Internal server error"}}}},"/api/posts/{post_id}/comments":{"get":{"tags":["comments"],"operationId":"list_comments","parameters":[{"name":"post_id","in":"path","description":"Post ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"limit","in":"query","description":"Number of comments to return (default 20)","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","description":"Offset for pagination (default 0)","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"List of comments","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentListResponse"}}}},"404":{"description":"Post not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentErrorResponse"}}}},"500":{"description":"Internal server error"}}},"post":{"tags":["comments"],"operationId":"create_comment","parameters":[{"name":"post_id","in":"path","description":"Post ID","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCommentRequest"}}},"required":true},"responses":{"201":{"description":"Comment created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCommentResponse"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentErrorResponse"}}}},"401":{"description":"Not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthErrorResponse"}}}},"404":{"description":"Post not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentErrorResponse"}}}},"500":{"description":"Internal server error"}}}},"/api/posts/{post_id}/image":{"get":{"tags":["posts"],"operationId":"get_post_image","parameters":[{"name":"post_id","in":"path","description":"Post ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Image data","content":{"image/*":{}}},"404":{"description":"Post or image not found"},"500":{"description":"Internal server error"}}}},"/api/posts/{post_id}/rate":{"post":{"tags":["ratings"],"operationId":"rate_post","parameters":[{"name":"post_id","in":"path","description":"Post ID","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RatePostRequest"}}},"required":true},"responses":{"200":{"description":"Rating updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RatingResponse"}}}},"400":{"description":"Invalid rating value","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RatingErrorResponse"}}}},"401":{"description":"Not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthErrorResponse"}}}},"404":{"description":"Post not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RatingErrorResponse"}}}},"500":{"description":"Internal server error"}}},"delete":{"tags":["ratings"],"operationId":"remove_rating","parameters":[{"name":"post_id","in":"path","description":"Post ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Rating removed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RatingResponse"}}}},"401":{"description":"Not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthErrorResponse"}}}},"404":{"description":"Post not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RatingErrorResponse"}}}},"500":{"description":"Internal server error"}}}},"/api/register":{"post":{"tags":["auth"],"operationId":"register_user","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegistrationRequest"}}},"required":true},"responses":{"200":{"description":"User registered successfully"},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterErrorResponse"}}}},"409":{"description":"Username or email already taken","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterErrorResponse"}}}}}}},"/api/request-password-reset":{"post":{"tags":["auth"],"operationId":"request_password_reset","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetRequest"}}},"required":true},"responses":{"200":{"description":"Password reset requested (always returns success for security)"},"500":{"description":"Internal server error"}}}},"/api/verify-email":{"post":{"tags":["auth"],"operationId":"verify_email","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailVerificationRequest"}}},"required":true},"responses":{"200":{"description":"Email verified successfully"},"400":{"description":"Invalid or expired token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyEmailErrorResponse"}}}}}}}},"components":{"schemas":{"AuthError":{"type":"string","description":"Error codes for auth check and refresh endpoints.","enum":["INVALID_CREDENTIALS","INTERNAL"]},"AuthErrorResponse":{"type":"object","description":"Auth error response (used for auth check and refresh).","required":["error"],"properties":{"error":{"$ref":"#/components/schemas/AuthError"}}},"AuthSessionResponse":{"type":"object","description":"Auth session response - used for both auth check and refresh endpoints.","required":["username","email","role","sessionExpiresAt","sessionCreatedAt"],"properties":{"email":{"type":"string"},"role":{"$ref":"#/components/schemas/UserRole"},"sessionCreatedAt":{"type":"integer","format":"int64"},"sessionExpiresAt":{"type":"integer","format":"int64"},"username":{"type":"string"}}},"CommentError":{"type":"string","description":"Error codes for comment operations.","enum":["NOT_FOUND","POST_NOT_FOUND","VALIDATION","INTERNAL"]},"CommentErrorResponse":{"type":"object","description":"Comment error response.","required":["error"],"properties":{"error":{"$ref":"#/components/schemas/CommentError"},"validation":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ValidationErrorData"}]}}},"CommentListResponse":{"type":"object","description":"Comment list response.","required":["comments","total"],"properties":{"comments":{"type":"array","items":{"$ref":"#/components/schemas/CommentResponse"}},"total":{"type":"integer","format":"int64"}}},"CommentResponse":{"type":"object","description":"Comment data returned from API.","required":["commentId","postId","userId","username","content","createdAt"],"properties":{"commentId":{"type":"integer","format":"int64"},"content":{"type":"string"},"createdAt":{"type":"integer","format":"int64"},"postId":{"type":"integer","format":"int64"},"userId":{"type":"integer","format":"int64"},"username":{"type":"string"}}},"CompletePasswordResetError":{"type":"string","description":"Error codes specific to password reset completion endpoint.","enum":["INVALID_TOKEN","VALIDATION","INTERNAL"]},"CompletePasswordResetErrorResponse":{"type":"object","description":"Password reset completion error response.","required":["error"],"properties":{"error":{"$ref":"#/components/schemas/CompletePasswordResetError"},"validation":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ValidationErrorData"}]}}},"CounterData":{"type":"object","description":"Counter data containing the current counter value.","required":["value"],"properties":{"value":{"type":"integer","format":"int64"}}},"CreateCommentRequest":{"type":"object","description":"Create comment request payload.","required":["content"],"properties":{"content":{"type":"string"}}},"CreateCommentResponse":{"type":"object","description":"Comment creation success response.","required":["commentId"],"properties":{"commentId":{"type":"integer","format":"int64"}}},"CreatePostResponse":{"type":"object","description":"Post creation success response.","required":["postId"],"properties":{"postId":{"type":"integer","format":"int64"}}},"DeletedPostResponse":{"type":"object","description":"Deleted post data for admin restore.","required":["postId","userId","username","title","deletedAt"],"properties":{"deletedAt":{"type":"integer","format":"int64"},"postId":{"type":"integer","format":"int64"},"title":{"type":"string"},"userId":{"type":"integer","format":"int64"},"username":{"type":"string"}}},"DeletedPostsListResponse":{"type":"object","description":"Deleted posts list response.","required":["posts","total"],"properties":{"posts":{"type":"array","items":{"$ref":"#/components/schemas/DeletedPostResponse"}},"total":{"type":"integer","format":"int64"}}},"EmailVerificationRequest":{"type":"object","description":"Email verification request payload.","required":["token"],"properties":{"token":{"type":"string"}}},"FieldType":{"type":"string","description":"Field types for validation errors.","enum":["UNSPECIFIED","USERNAME","EMAIL","PASSWORD","POST_TITLE","POST_DESCRIPTION","COMMENT_CONTENT"]},"LoginError":{"type":"string","description":"Error codes specific to login endpoint.","enum":["INVALID_CREDENTIALS","EMAIL_NOT_VERIFIED","VALIDATION","INTERNAL"]},"LoginErrorResponse":{"type":"object","description":"Login error response.","required":["error"],"properties":{"error":{"$ref":"#/components/schemas/LoginError"},"validation":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ValidationErrorData"}]}}},"LoginRequest":{"type":"object","description":"Login request payload.","required":["username","password"],"properties":{"password":{"type":"string"},"username":{"type":"string"}}},"LoginResponse":{"type":"object","description":"Login success response.","required":["username","email","role","sessionExpiresAt","sessionCreatedAt"],"properties":{"email":{"type":"string"},"role":{"$ref":"#/components/schemas/UserRole"},"sessionCreatedAt":{"type":"integer","format":"int64","description":"Unix timestamp in seconds when the session was created."},"sessionExpiresAt":{"type":"integer","format":"int64","description":"Unix timestamp in seconds when the session expires."},"username":{"type":"string"}}},"PasswordResetCompleteRequest":{"type":"object","description":"Password reset completion request payload.","required":["token","newPassword"],"properties":{"newPassword":{"type":"string"},"token":{"type":"string"}}},"PasswordResetRequest":{"type":"object","description":"Password reset request payload (initial step).","required":["email"],"properties":{"email":{"type":"string"}}},"PostError":{"type":"string","description":"Error codes for post operations.","enum":["NOT_FOUND","VALIDATION","INVALID_IMAGE","INTERNAL"]},"PostErrorResponse":{"type":"object","description":"Post error response.","required":["error"],"properties":{"error":{"$ref":"#/components/schemas/PostError"},"validation":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ValidationErrorData"}]}}},"PostListResponse":{"type":"object","description":"Post list response with pagination info.","required":["posts","total","limit","offset"],"properties":{"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"},"posts":{"type":"array","items":{"$ref":"#/components/schemas/PostResponse"}},"total":{"type":"integer","format":"int64"}}},"PostResponse":{"type":"object","description":"Post data returned from API.","required":["postId","userId","username","title","imageUrl","score","commentCount","createdAt"],"properties":{"commentCount":{"type":"integer","format":"int64"},"createdAt":{"type":"integer","format":"int64"},"description":{"type":["string","null"]},"imageUrl":{"type":"string"},"postId":{"type":"integer","format":"int64"},"score":{"type":"integer","format":"int64"},"title":{"type":"string"},"updatedAt":{"type":["integer","null"],"format":"int64"},"userId":{"type":"integer","format":"int64"},"userRating":{"type":["integer","null"],"format":"int32","description":"User's rating on this post: 1, -1, or null if not rated"},"username":{"type":"string"}}},"RatePostRequest":{"type":"object","description":"Rate post request payload.","required":["value"],"properties":{"value":{"type":"integer","format":"int32","description":"Rating value: 1 for upvote, -1 for downvote"}}},"RatingError":{"type":"string","description":"Error codes for rating operations.","enum":["POST_NOT_FOUND","INVALID_VALUE","INTERNAL"]},"RatingErrorResponse":{"type":"object","description":"Rating error response.","required":["error"],"properties":{"error":{"$ref":"#/components/schemas/RatingError"}}},"RatingResponse":{"type":"object","description":"Rating response showing current score after rating.","required":["score"],"properties":{"score":{"type":"integer","format":"int64"},"userRating":{"type":["integer","null"],"format":"int32","description":"User's current rating: 1, -1, or null if removed"}}},"RegisterError":{"type":"string","description":"Error codes specific to registration endpoint.","enum":["USERNAME_TAKEN","EMAIL_TAKEN","VALIDATION","INTERNAL"]},"RegisterErrorResponse":{"type":"object","description":"Registration error response.","required":["error"],"properties":{"error":{"$ref":"#/components/schemas/RegisterError"},"validation":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ValidationErrorData"}]}}},"RegistrationRequest":{"type":"object","description":"Registration request payload.","required":["username","email","password"],"properties":{"email":{"type":"string"},"password":{"type":"string"},"username":{"type":"string"}}},"SetCounterRequest":{"type":"object","description":"Set counter request payload.","required":["value"],"properties":{"value":{"type":"integer","format":"int64"}}},"UpdatePostRequest":{"type":"object","description":"Update post request payload.","required":["title"],"properties":{"description":{"type":["string","null"]},"title":{"type":"string"}}},"UpdateUserRoleRequest":{"type":"object","description":"Update user role request payload.","required":["role"],"properties":{"role":{"$ref":"#/components/schemas/UserRole"}}},"UserInfoResponse":{"type":"object","description":"User info for admin endpoints.","required":["userId","username","email","role","emailVerified"],"properties":{"email":{"type":"string"},"emailVerified":{"type":"boolean"},"role":{"$ref":"#/components/schemas/UserRole"},"userId":{"type":"integer","format":"int64"},"username":{"type":"string"}}},"UserListResponse":{"type":"object","description":"User list response for admin.","required":["users"],"properties":{"users":{"type":"array","items":{"$ref":"#/components/schemas/UserInfoResponse"}}}},"UserRole":{"type":"string","description":"User roles for RBAC.\nStored as integer in database for type safety.","enum":["user","admin"]},"ValidationErrorCode":{"type":"string","description":"Validation error codes.","enum":["UNSPECIFIED","REQUIRED","TOO_SHORT","TOO_LONG","INVALID_CHARACTERS","INVALID_FORMAT","TOO_FEW_UPPERCASE_LETTERS","TOO_FEW_LOWERCASE_LETTERS","TOO_FEW_DIGITS","TOO_FEW_SPECIAL_CHARACTERS"]},"ValidationErrorData":{"type":"object","description":"Validation error data containing multiple field errors.","required":["fieldErrors"],"properties":{"fieldErrors":{"type":"array","items":{"$ref":"#/components/schemas/ValidationFieldError"}}}},"ValidationFieldError":{"type":"object","description":"Validation error for a single field.","required":["field","errors"],"properties":{"errors":{"type":"array","items":{"$ref":"#/components/schemas/ValidationErrorCode"}},"field":{"$ref":"#/components/schemas/FieldType"}}},"VerifyEmailError":{"type":"string","description":"Error codes specific to email verification endpoint.","enum":["TOKEN_EXPIRED","INTERNAL"]},"VerifyEmailErrorResponse":{"type":"object","description":"Email verification error response.","required":["error"],"properties":{"error":{"$ref":"#/components/schemas/VerifyEmailError"}}}}}}